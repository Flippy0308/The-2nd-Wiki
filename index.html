<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Community Word Dictionary</title>
<style>
body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:20px; }
h1,h2{text-align:center;color:#333;}
#loginForm,#wordForm{max-width:500px;margin:20px auto;background:#fff;padding:15px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);}
input,textarea,button{width:100%;padding:10px;margin:5px 0 15px 0;border-radius:5px;border:1px solid #ccc;box-sizing:border-box;}
button{background:#28a745;color:white;border:none;cursor:pointer;}
button:hover{background:#218838;}
#search{max-width:500px;margin:10px auto;display:block;padding:10px;border-radius:5px;border:1px solid #ccc;}
.word-list{max-width:600px;margin:20px auto;}
.word-item{background:#fff;padding:15px;margin-bottom:10px;border-left:5px solid #28a745;border-radius:5px;position:relative;transition:all 0.3s;}
.word-item.own-word{border-left-color:#007bff;background-color:#e7f0ff;}
.word-item h3{margin:0 0 5px 0;}
.creator{font-size:0.85em;color:#555;}
.actions{position:absolute;top:10px;right:10px;}
.actions button{background:#007bff;margin-left:5px;padding:5px 8px;font-size:0.8em;border:none;border-radius:3px;cursor:pointer;color:white;}
.actions button.delete{background:#dc3545;}
.actions button:hover{opacity:0.9;}
#logoutBtn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background:#dc3545;
  color:white;
  border:none;
  padding:10px 15px;
  border-radius:5px;
  cursor:pointer;
}
#logoutBtn:hover { opacity:0.9; }
</style>
</head>
<body>

<h1>Community Word Dictionary</h1>

<div id="loginContainer">
  <form id="loginForm">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Enter your username" required>
    <button type="submit">Login</button>
  </form>
</div>

<div id="mainApp" style="display:none;">
  <form id="wordForm">
    <input type="text" id="word" placeholder="Enter a word" required>
    <textarea id="description" placeholder="Enter a description" rows="3" required></textarea>
    <button type="submit">Add Word</button>
  </form>

  <input type="text" id="search" placeholder="Search words...">

  <div class="word-list" id="wordList"></div>

  <button id="logoutBtn">Logout</button>
</div>

<script>
const loginForm = document.getElementById('loginForm');
const usernameInput = document.getElementById('username');
const loginContainer = document.getElementById('loginContainer');
const mainApp = document.getElementById('mainApp');
const wordForm = document.getElementById('wordForm');
const wordList = document.getElementById('wordList');
const searchInput = document.getElementById('search');
const logoutBtn = document.getElementById('logoutBtn');

const rudeWords = ["badword1","badword2","badword3"];

let currentUser = localStorage.getItem('currentUser');
let words = JSON.parse(localStorage.getItem('words')) || [];

if(currentUser) showApp();

loginForm.addEventListener('submit', e=>{
  e.preventDefault();
  const username = usernameInput.value.trim();
  if(!username) return;

  // Prevent username if already in use
  if(localStorage.getItem('currentUser')){
    alert("This username is already logged in. Please logout first.");
    return;
  }

  currentUser = username;
  localStorage.setItem('currentUser', currentUser);
  showApp();
});

function showApp(){
  loginContainer.style.display='none';
  mainApp.style.display='block';
  renderWords();
}

function saveWords(){ localStorage.setItem('words', JSON.stringify(words)); }

function renderWords(filter=''){
  wordList.innerHTML='';
  words
    .filter(w => w.word.toLowerCase().includes(filter.toLowerCase()))
    .forEach((w,index)=>{
      const wordItem=document.createElement('div');
      wordItem.classList.add('word-item');
      if(w.creator===currentUser) wordItem.classList.add('own-word');

      let actions='';
      if(w.creator===currentUser){
        actions=`<div class="actions">
                  <button onclick="editWord(${index})">Edit</button>
                  <button class="delete" onclick="deleteWord(${index})">Delete</button>
                 </div>`;
      }

      wordItem.innerHTML=`<h3>${w.word}</h3>
                          <p>${w.description}</p>
                          <div class="creator">Created by: ${w.creator}</div>
                          ${actions}`;
      wordList.appendChild(wordItem);
    });
}

wordForm.addEventListener('submit', e=>{
  e.preventDefault();
  const word = document.getElementById('word').value.trim();
  const description = document.getElementById('description').value.trim();
  if(!word || !description) return;

  if(rudeWords.some(r=> (word+" "+description).toLowerCase().includes(r))){
    alert("Contains inappropriate language!"); return;
  }

  if(words.some(w=> w.word.toLowerCase()===word.toLowerCase())){
    alert("This word already exists!"); return;
  }

  words.push({word, description, creator: currentUser});
  saveWords();
  renderWords();
  wordForm.reset();
});

searchInput.addEventListener('input', ()=> renderWords(searchInput.value));

window.editWord=function(index){
  const w=words[index];
  const newWord=prompt("Edit word:",w.word);
  if(!newWord) return;
  const newDesc=prompt("Edit description:",w.description);
  if(newDesc===null) return;

  if(rudeWords.some(r=> (newWord+" "+newDesc).toLowerCase().includes(r))){
    alert("Contains inappropriate language!"); return;
  }

  if(words.some((wordObj,i)=> i!==index && wordObj.word.toLowerCase()===newWord.toLowerCase())){
    alert("Duplicate word!"); return;
  }

  words[index].word=newWord;
  words[index].description=newDesc;
  saveWords();
  renderWords();
}

window.deleteWord=function(index){
  if(confirm("Are you sure you want to delete this word?")){
    words.splice(index,1);
    saveWords();
    renderWords();
  }
}

// Logout button
logoutBtn.addEventListener('click', ()=>{
  if(confirm("Do you want to logout?")){
    localStorage.removeItem('currentUser');
    currentUser=null;
    mainApp.style.display='none';
    loginContainer.style.display='block';
  }
});
</script>

</body>
</html>
